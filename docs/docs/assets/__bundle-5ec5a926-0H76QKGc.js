import{g as y,m as o,j as L,h as q,W as X,o as b,X as I,i as N}from"./jspdf.es.min-CL1hZAQy.js";import"./__bundle-8b4f432b-C9OXY8E-.js";import"./iframe-Br5yGide.js";import"./index-bVxR5iTN.js";var M=function(i,a){return new Promise(function(v,s){if(typeof XMLHttpRequest<"u"){var d=y.of(i),n=d.dispatcher,w=d.logger,c=a.requestId,E=a.method,x=a.url,u=a.headers,f=u===void 0?{}:u,p=a.data,H=p===void 0?"":p,l=a.uploadProgressHandler,m=!1,e=new XMLHttpRequest;e.open(E,x),Object.keys(f).forEach(function(t){e.setRequestHeader(t,f[t])}),l&&e.upload.addEventListener("progress",function(t){t.lengthComputable?l(c,t.loaded,t.total):w.debug("Progress computing failed: `Content-Length` header is not given.")}),e.onabort=function(){s(o.requestCanceled)},e.onerror=function(t){s(o.networkError)},e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE&&!m)if(e.status===0||e.status>=200&&e.status<400)try{var t=JSON.parse(e.responseText);v(new L(i,t))}catch{s(o.networkError)}else try{var g=JSON.parse(e.responseText);if(g){var r=new o(g);if(r.isSessionExpiredError){if(n.dispatch(new q({reason:r.code,message:r.message})),!(e instanceof X)){var h=new b;return n.dispatch(new I({request:e,deferred:h,error:r})),h.promise}}else r.isSessionInvalidatedError&&n.dispatch(new q({reason:r.code,message:r.message}));s(r)}else s(o.requestFailed)}catch{s(o.requestFailed)}},n.on(function(t){t instanceof N&&(t.requestId&&t.requestId!==c||(m=!0,e.abort()))}),e.send(H)}else s(o.xmlHttpRequestNotSupported)})};export{M as xmlHttpRequest};
